import { Callout, Tabs, Steps } from 'nextra/components'

# å¼€å‘å…¥é—¨æŒ‡å—

Home-MCP æ”¯æŒä¸¤ç§å¼€å‘æ¨¡å¼ï¼Œæ ¹æ®æ‚¨çš„ç¯å¢ƒé€‰æ‹©åˆé€‚çš„æ–¹å¼ã€‚

## é€‰æ‹©å¼€å‘æ¨¡å¼

<Tabs items={['æ™®é€šæ¨¡å¼', 'Mock æ¨¡å¼']}>
<Tabs.Tab>
### æ™®é€šå¼€å‘æ¨¡å¼

é€‚ç”¨äºå·²æœ‰ Home Assistant å®ä¾‹çš„å¼€å‘è€…ï¼Œéœ€è¦æµ‹è¯•çœŸå®çš„è®¾å¤‡äº¤äº’ã€‚

**è¦æ±‚**ï¼š
- Home Assistant è¿è¡Œå®ä¾‹
- å¼€å‘è€…è®¿é—®ä»¤ç‰Œ
</Tabs.Tab>

<Tabs.Tab>
### Mock å¼€å‘æ¨¡å¼

é€‚ç”¨äºæ²¡æœ‰ Home Assistant ç¯å¢ƒçš„å¼€å‘è€…ï¼Œæˆ–éœ€è¦å¿«é€ŸåŸå‹å¼€å‘ã€‚

**ä¼˜åŠ¿**ï¼š
- æ— éœ€å¤–éƒ¨ä¾èµ–
- å¿«é€Ÿå¯åŠ¨ï¼Œæ”¯æŒçƒ­é‡è½½
- å®Œæ•´çš„ Home Assistant API æ¨¡æ‹Ÿ
</Tabs.Tab>
</Tabs>

## å¿«é€Ÿå¼€å§‹

### æ™®é€šå¼€å‘æ¨¡å¼

<Steps>
## 1. é…ç½®ç¯å¢ƒå˜é‡
åˆ›å»º `.env` æ–‡ä»¶ï¼š
```bash
HA_BASE_URL="http://localhost:8123"
HA_TOKEN="your_access_token"
LOG_LEVEL="debug"
```

## 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
pnpm install
pnpm dev
```

## 3. éªŒè¯è¿æ¥
æ£€æŸ¥è¾“å‡ºï¼š
```bash
âœ… Home Assistant API è¿æ¥æˆåŠŸ
ğŸ“¡ ä¼ è¾“å±‚: stdio
ğŸ”§ å·²æ³¨å†Œ 17 ä¸ªå·¥å…·
```
</Steps>

### Mock å¼€å‘æ¨¡å¼

<Steps>
## 1. å¯åŠ¨ Mock æ¨¡å¼
```bash
pnpm install
pnpm dev:mock
```

## 2. éªŒè¯ Mock æœåŠ¡
è¾“å‡ºç¤ºä¾‹ï¼š
```bash
ğŸ”§ Initializing Mock Server for Home Assistant API...
ğŸ”§ Mock server started for Home Assistant API
ğŸ“ Mocked endpoints:
   - GET /api/
   - GET /api/states
   - POST /api/services/<domain>/<service>
```
</Steps>

<Callout type="info">
Mock æ¨¡å¼é€‚åˆå¿«é€Ÿå¼€å‘ï¼Œæ™®é€šæ¨¡å¼ç”¨äºæœ€ç»ˆéªŒè¯ã€‚
</Callout>

## å¼€å‘å·¥ä½œæµ

### æ—¥å¸¸å¼€å‘
```bash
pnpm dev        # æ™®é€šæ¨¡å¼
pnpm dev:mock   # Mock æ¨¡å¼
```

### ä»£ç æ£€æŸ¥
```bash
pnpm check:all      # è¿è¡Œæ‰€æœ‰æ£€æŸ¥
pnpm lint          # ä»£ç é£æ ¼æ£€æŸ¥
pnpm type:check    # TypeScript ç±»å‹æ£€æŸ¥
pnpm spell:check   # æ‹¼å†™æ£€æŸ¥
```

<Callout type="warning">
é¡¹ç›®ä¸¥æ ¼ç¦æ­¢ä½¿ç”¨ `any` ç±»å‹ï¼Œè¯·ä½¿ç”¨æ˜ç¡®çš„ç±»å‹å®šä¹‰ã€‚
</Callout>

### æµ‹è¯•
```bash
pnpm test           # è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test:mock      # Mock æ¨¡å¼æµ‹è¯•
pnpm test:coverage  # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

### æ„å»º
```bash
pnpm build           # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
node dist/index.js   # æœ¬åœ°æµ‹è¯•æ„å»ºç‰ˆæœ¬
```

## å¸¸è§é—®é¢˜

### å¦‚ä½•åˆ‡æ¢å¼€å‘æ¨¡å¼ï¼Ÿ
```bash
# åˆ‡æ¢åˆ° Mock æ¨¡å¼
USE_MOCK=true pnpm dev

# åˆ‡æ¢åˆ°æ™®é€šæ¨¡å¼
pnpm dev
```

### Mock æ•°æ®ä¸æ»¡è¶³éœ€æ±‚ï¼Ÿ
ä¿®æ”¹ `src/mocks/data/` ä¸­çš„æ•°æ®æ–‡ä»¶ï¼Œæˆ–åœ¨ `src/mocks/handlers.ts` ä¸­æ·»åŠ æ–°çš„å¤„ç†å™¨ã€‚

### é‡åˆ°ç±»å‹é”™è¯¯ï¼Ÿ
```bash
pnpm type:check
pnpm check:fix
```

## ä¸‹ä¸€æ­¥

1. é˜…è¯»è´¡çŒ®æŒ‡å—ï¼š`docs/content/development/contributing.mdx`
2. æ ¹æ®éœ€æ±‚é€‰æ‹©å¼€å‘æ¨¡å¼å¼€å§‹å¼€å‘
3. è¿è¡Œæµ‹è¯•ç¡®ä¿ä»£ç è´¨é‡

<Callout type="success">
é€‰æ‹©åˆé€‚çš„å¼€å‘æ¨¡å¼ï¼Œå¼€å§‹æ‚¨çš„å¼€å‘å·¥ä½œå§ï¼
</Callout>